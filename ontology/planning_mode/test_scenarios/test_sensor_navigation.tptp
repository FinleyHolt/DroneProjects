%------------------------------------------------------------------------------
% UAV Domain Ontology - Sensor Navigation Test
% Tests sensor availability axioms for valid localization
%------------------------------------------------------------------------------

% ============================================================================
% SECTION 1: Type Declarations (FOF)
% ============================================================================

% UAV class hierarchy
fof(uav_is_aircraft, axiom,
    ![X]: (uav(X) => aircraft(X))).

fof(multirotor_is_uav, axiom,
    ![X]: (multirotor(X) => uav(X))).

fof(quadcopter_is_multirotor, axiom,
    ![X]: (quadcopter(X) => multirotor(X))).

fof(flyby_f11_is_quadcopter, axiom,
    ![X]: (flyby_f11(X) => quadcopter(X))).

% Sensor hierarchy
fof(uav_sensor_is_device, axiom,
    ![X]: (uav_sensor(X) => device(X))).

fof(imu_is_sensor, axiom,
    ![X]: (inertial_measurement_unit(X) => uav_sensor(X))).

fof(gps_is_sensor, axiom,
    ![X]: (gps_sensor(X) => positioning_sensor(X))).

fof(positioning_is_sensor, axiom,
    ![X]: (positioning_sensor(X) => uav_sensor(X))).

% ============================================================================
% SECTION 2: Sensor Availability Axioms
% ============================================================================

% Valid navigation requires both IMU and GPS operational
fof(valid_navigation_axiom, axiom,
    ![UAV, IMU, GPS, Pos1, Pos2]:
      ((uav(UAV) &
        has_sensor(UAV, IMU, Pos1) &
        inertial_measurement_unit(IMU) &
        imu_operational(IMU) &
        has_sensor(UAV, GPS, Pos2) &
        gps_sensor(GPS) &
        gps_operational(GPS))
       => has_valid_localization(UAV))).

% GPS failure with operational VIO allows continued flight
fof(vio_fallback_axiom, axiom,
    ![UAV, GPS, Pos]:
      ((uav(UAV) &
        has_sensor(UAV, GPS, Pos) &
        gps_sensor(GPS) &
        ~gps_operational(GPS) &
        has_valid_visual_odometry(UAV))
       => has_valid_localization(UAV))).

% IMU failure is critical - must land immediately
fof(imu_failure_axiom, axiom,
    ![UAV, IMU, Pos]:
      ((uav(UAV) &
        has_sensor(UAV, IMU, Pos) &
        inertial_measurement_unit(IMU) &
        ~imu_operational(IMU))
       => must_land(UAV))).

% ============================================================================
% SECTION 3: Test Scenario - Valid Sensor Suite
% ============================================================================

% Define test instances
fof(test_drone_is_flyby_f11, axiom, flyby_f11(test_drone_1)).
fof(test_imu_exists, axiom, inertial_measurement_unit(test_imu_1)).
fof(test_gps_exists, axiom, gps_sensor(test_gps_1)).

% UAV has sensors mounted
fof(test_has_imu, axiom, has_sensor(test_drone_1, test_imu_1, body_center)).
fof(test_has_gps, axiom, has_sensor(test_drone_1, test_gps_1, top_plate)).

% Both sensors operational
fof(test_imu_operational, axiom, imu_operational(test_imu_1)).
fof(test_gps_operational, axiom, gps_operational(test_gps_1)).

% ============================================================================
% THEOREM 1: Valid localization with operational sensors
% ============================================================================

fof(prove_valid_localization, conjecture,
    has_valid_localization(test_drone_1)).

%------------------------------------------------------------------------------
% Expected result: THEOREM PROVED
% Both IMU and GPS are operational, so has_valid_localization should be true.
%------------------------------------------------------------------------------
