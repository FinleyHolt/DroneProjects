{
  "phase": "phase-04-vampire-runtime",
  "phase_number": 4,
  "depends_on": [
    "phase-01-ontology-toolchain",
    "phase-02-uav-ontology",
    "phase-03-evaluation"
  ],
  "required_by": [
    "phase-05-perception-bridge",
    "phase-06-phase-transition",
    "phase-07-mission-planner-rl"
  ],
  "blocking": true,
  "description": "Phase 4 creates the Vampire runtime integration for both tactical reasoning and mission planning. Based on Phase 3 evaluation, Vampire is the single reasoning engine (no Prolog translation needed).",
  "architectural_decision": {
    "source": "Phase 3 Evaluation Report (ontology/evaluation/EVALUATION_REPORT.qmd)",
    "decision": "Single-reasoner architecture using Vampire only",
    "rationale": [
      "Vampire ~50ms latency acceptable for 20Hz navigation loop",
      "OWL reasoners cannot express safety axioms (DL limitations)",
      "Prolog rejected to avoid translation/maintenance burden",
      "KIF/SUMO remains single source of truth with 0% translation loss"
    ]
  },
  "dependency_details": {
    "phase-01-ontology-toolchain": {
      "reason": "Uses Vampire from planning container as base",
      "artifacts_needed": [
        "flyby-f11-planning:latest container image",
        "Vampire theorem prover installation"
      ]
    },
    "phase-02-uav-ontology": {
      "reason": "Vampire queries run against UAV domain ontology",
      "artifacts_needed": [
        "ontology/planning_mode/uav_domain.kif",
        "ontology/planning_mode/test_scenarios/"
      ]
    },
    "phase-03-evaluation": {
      "reason": "Benchmark results validate Vampire performance and architectural decision",
      "artifacts_needed": [
        "ontology/evaluation/EVALUATION_REPORT.qmd",
        "ontology/evaluation/decision_matrix.json",
        "ontology/evaluation/benchmark_queries/"
      ],
      "key_findings": {
        "vampire_p95_ms": 48,
        "prolog_rejected": true,
        "owl_unsuitable": true,
        "tiered_safety_architecture": "Classical control (<1ms) + Costmaps (<10ms) + Vampire (~50ms)"
      }
    }
  },
  "parallel_execution": {
    "can_run_parallel": false,
    "notes": "Sequential dependency on Phase 3 evaluation. Blocks perception bridge and RL development."
  },
  "new_dependencies_for_phase": {
    "containerization": [
      "Podman for ARM64 container builds",
      "QEMU for ARM64 emulation (if Jetson unavailable)"
    ],
    "arm64_toolchain": [
      "aarch64-linux-gnu-g++ cross-compiler",
      "CMake with cross-compilation support"
    ],
    "ros2": [
      "ROS 2 Humble base",
      "rclpy for Python nodes",
      "Custom message/service definitions"
    ],
    "deployment": [
      "Quadlet container specifications",
      "systemd user unit management"
    ]
  }
}
