# Randomized Training World Configuration
# Flyby F-11 RL Training Environment
#
# This is a BASE configuration for domain randomization.
# Use scripts/randomize_world.py to generate variants with
# different obstacle positions, NFZ locations, and conditions.

world:
  name: "flyby_randomized"
  sdf_file: "randomized_training.sdf"
  description: "Domain randomization template for diverse training scenarios"
  dimensions:
    x_min: -175
    x_max: 175
    y_min: -175
    y_max: 175
    z_min: 0
    z_max: 80

# Spherical coordinates (can be randomized)
coordinates:
  latitude_deg: 34.0522
  longitude_deg: -118.2437
  elevation: 100
  frame: ENU

spawn_points:
  - name: "default"
    pose: [0, 0, 0.5, 0, 0, 0]
    description: "Center ground level"
    randomizable: false  # Default spawn is fixed
  - name: "rooftop"
    pose: [50, 100, 26, 0, 0, 0]
    description: "On building 3 rooftop"
    randomizable: true
  - name: "secondary"
    pose: [-120, 120, 0.5, 0, 0, 0]
    description: "Secondary ground position"
    randomizable: true

landing_zones:
  - name: "primary"
    position: [0, 0, 0]
    radius: 4.0
    type: "primary"
    randomizable: false
  - name: "secondary"
    position: [-120, 120, 0]
    radius: 3.0
    type: "secondary"
    randomizable: true
  - name: "rooftop"
    position: [50, 100, 25]
    radius: 2.5
    type: "rooftop"
    randomizable: true
  - name: "emergency"
    position: [140, -140, 0]
    radius: 5.0
    type: "emergency"
    randomizable: true

no_fly_zones:
  - name: "zone_1"
    type: "cylinder"
    center: [60, 60, 0]
    radius: 25
    height: 50
    reason: "Restricted facility"
    severity: "critical"
    randomizable: true
    randomization_bounds:
      x_range: [-100, 100]
      y_range: [-100, 100]
      radius_range: [15, 35]
  - name: "zone_2"
    type: "box"
    min: [-120, -100, 0]
    max: [-70, -60, 45]
    reason: "Restricted area"
    severity: "high"
    randomizable: true
    randomization_bounds:
      x_range: [-140, 140]
      y_range: [-140, 140]
      size_range: [30, 60]

obstacles:
  buildings:
    - name: "obstacle_building_1"
      type: "box"
      pose: [-60, 40, 10]
      size: [20, 15, 20]
      randomizable: true
    - name: "obstacle_building_2"
      type: "box"
      pose: [70, -50, 7.5]
      size: [25, 20, 15]
      randomizable: true
    - name: "obstacle_building_3"
      type: "box"
      pose: [50, 100, 12.5]
      size: [30, 25, 25]
      randomizable: true
  towers:
    - name: "obstacle_tower_1"
      type: "cylinder"
      pose: [20, 80, 15]
      radius: 4
      height: 30
      randomizable: true
  poles:
    - name: "obstacle_pole_1"
      type: "cylinder"
      pose: [-30, -30, 12.5]
      radius: 0.5
      height: 25
      randomizable: true
  vegetation:
    - name: "obstacle_tree_1"
      type: "tree"
      pose: [100, 20, 0]
      trunk_height: 8
      canopy_radius: 4
      randomizable: true
  storage:
    - name: "obstacle_tank_1"
      type: "cylinder"
      pose: [-100, 100, 5]
      radius: 6
      height: 10
      randomizable: true
    - name: "obstacle_low_1"
      type: "box"
      pose: [-80, -70, 3]
      size: [15, 10, 6]
      randomizable: true

# Domain randomization parameters
randomization:
  enabled: true
  seed: 42

  obstacle_placement:
    enabled: true
    position_noise: 20  # meters
    rotation_noise: 0.5  # radians

  nfz_placement:
    enabled: true
    position_noise: 30  # meters
    size_noise: 0.3  # fraction of original size

  lighting:
    enabled: true
    options: ["day", "dusk", "overcast"]
    sun_direction_noise: 0.2  # radians

  ground_texture:
    enabled: true
    options: ["grass", "asphalt", "dirt", "concrete"]

  spawn_variation:
    enabled: true
    position_noise: 5  # meters

training_parameters:
  episode_timeout: 300  # seconds
  max_altitude: 70  # meters
  min_altitude: 1  # meters
  min_obstacle_distance: 3.0  # meters
  reward_weights:
    goal_reached: 100.0
    nfz_violation: -200.0
    collision: -500.0
    geofence_violation: -300.0
    time_penalty: -0.1
    smooth_flight_bonus: 0.5

environment:
  type: "mixed"
  ground_texture: "grass"  # Default, can be randomized
  lighting: "day"  # Default, can be randomized
  complexity: "variable"
