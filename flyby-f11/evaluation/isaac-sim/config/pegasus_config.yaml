# Pegasus Simulator Configuration
# For Flyby F-11 Isaac Sim Evaluation
#
# This file configures the Pegasus Simulator extension for ArduPilot integration.

# ArduPilot Configuration
ardupilot:
  # Path to ArduPilot installation (inside container)
  ardupilot_dir: /opt/ardupilot

  # SITL configuration
  sitl:
    vehicle: ArduCopter
    model: JSON  # Required for Pegasus integration
    speedup: 1.0  # Real-time simulation

  # MAVLink configuration
  mavlink:
    connection_type: udpin
    connection_ip: 127.0.0.1
    connection_port: 5760
    enable_lockstep: true

# Simulation Configuration
simulation:
  # Physics settings
  physics:
    dt: 0.004  # 250Hz physics update
    substeps: 4
    use_gpu: true

  # Rendering settings
  rendering:
    # Path tracing for photorealistic rendering
    enable_path_tracing: false  # Disabled for performance during MVE
    samples_per_pixel: 64
    max_bounces: 4

    # Real-time rendering
    enable_rtx_realtime: true
    antialiasing: TAA

# Vehicle Configuration
vehicle:
  # F-11 ISR quadcopter
  name: f11_isr
  type: multirotor
  num_rotors: 4

  # Physical properties (approximate)
  mass_kg: 3.5
  arm_length_m: 0.25

  # Motor configuration
  motors:
    kf: 8.54858e-06  # thrust coefficient
    km: 1.36e-07     # torque coefficient
    max_rpm: 10000

  # Initial spawn position
  spawn:
    position: [0.0, 0.0, 0.5]
    orientation: [0.0, 0.0, 0.0, 1.0]  # quaternion (x, y, z, w)

# Sensor Configuration
sensors:
  # ISR Camera (primary)
  isr_camera:
    enabled: true
    topic: /f11/camera/image_raw
    resolution: [1280, 720]
    fps: 30
    fov_deg: 90
    # Sensor position relative to body frame
    position: [0.1, 0.0, -0.05]
    orientation: [0.0, 0.0, 0.0, 1.0]

  # IMU
  imu:
    enabled: true
    topic: /f11/imu/data
    update_rate_hz: 400

  # GPS
  gps:
    enabled: true
    topic: /f11/gps/fix
    update_rate_hz: 10

  # Barometer
  barometer:
    enabled: true
    topic: /f11/baro/pressure
    update_rate_hz: 50

# ROS 2 Bridge Configuration
ros2:
  enabled: true
  domain_id: 42

  # Published topics (from Isaac Sim)
  publishers:
    - topic: /f11/camera/image_raw
      type: sensor_msgs/Image
      qos: sensor_data
    - topic: /f11/imu/data
      type: sensor_msgs/Imu
      qos: sensor_data
    - topic: /f11/gps/fix
      type: sensor_msgs/NavSatFix
      qos: sensor_data

  # Subscribed topics (if needed)
  subscribers: []

# World Configuration
world:
  # Default outdoor training world
  default_usd: /workspace/worlds/outdoor_training.usd

  # Environment settings
  environment:
    # Sun/lighting
    sun_elevation_deg: 45.0
    sun_azimuth_deg: 180.0
    sky_intensity: 1.0

    # Weather (for future domain randomization)
    weather: clear
    wind_speed_mps: 0.0
    wind_direction_deg: 0.0
